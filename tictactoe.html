<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tic Tac Toe - Human vs Human & computer</title>

    <!----Adsense of google -->
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3992617498769064"
     crossorigin="anonymous"></script>

    
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body {
            height: 100vh;
            background: linear-gradient(135deg, #b3d9ff, #a3cfff);
            display: flex;
            justify-content: center;
            align-items: center;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Arial, sans-serif;
            user-select: none;
            -webkit-user-select: none;
            touch-action: manipulation;
        }
        .game {
            width: 340px; max-width: 90vw; padding: 25px;
            background: rgba(255, 255, 255, 0.95); border-radius: 20px;
            text-align: center; box-shadow: 0 20px 40px rgba(0,0,0,0.1);
            backdrop-filter: blur(10px);
        }
        h2 { margin-bottom: 20px; font-size: 24px; color: #333; font-weight: 600; }
        .mode-buttons { 
            margin-bottom: 25px; /* ‚úÖ FIXED - More space below buttons */
        }
        .mode-toggle {
            padding: 8px 20px; font-size: 14px; font-weight: 600;
            background: linear-gradient(135deg, #4a90e2, #357abd); color: white;
            border: none; border-radius: 20px; cursor: pointer; transition: all 0.2s ease;
            box-shadow: 0 4px 15px rgba(74, 144, 226, 0.4); margin: 0 5px;
        }
        .mode-toggle.active { background: linear-gradient(135deg, #27ae60, #2ecc71); box-shadow: 0 4px 15px rgba(39, 174, 96, 0.4); }
        .mode-toggle:hover { transform: translateY(-2px); }
        .grid { display: grid; grid-template-columns: repeat(3, 1fr); gap: 10px; margin-bottom: 20px; }
        button.cell {
            height: 90px; font-size: 48px; font-weight: bold; background: #fff;
            border: 3px solid #e0e0e0; border-radius: 12px; cursor: pointer;
            transition: all 0.2s ease; color: #333;
        }
        button.cell:hover:not(:disabled) { background: #f8f9ff; border-color: #4a90e2; transform: scale(1.02); }
        button.cell:active:not(:disabled) { transform: scale(0.98); }
        button.cell:disabled { cursor: not-allowed; opacity: 0.6; }
        .reset {
            padding: 12px 30px; font-size: 16px; font-weight: 600;
            background: linear-gradient(135deg, #4a90e2, #357abd); color: white;
            border: none; border-radius: 25px; cursor: pointer; transition: all 0.2s ease;
            box-shadow: 0 4px 15px rgba(74, 144, 226, 0.4);
        }
        .reset:hover { transform: translateY(-2px); box-shadow: 0 6px 20px rgba(74, 144, 226, 0.5); }
        .popup {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0,0,0,0.6); display: none; justify-content: center;
            align-items: center; z-index: 1000; backdrop-filter: blur(5px);
        }
        .popup-content {
            background: white; padding: 30px; text-align: center; width: 280px;
            max-width: 90vw; border-radius: 20px; box-shadow: 0 20px 40px rgba(0,0,0,0.3);
            animation: popupSlide 0.3s ease;
        }
        @keyframes popupSlide {
            from { transform: scale(0.8) translateY(20px); opacity: 0; }
            to { transform: scale(1) translateY(0); opacity: 1; }
        }
        .popup-content h3 { margin-bottom: 20px; font-size: 22px; color: #333; }
        .popup-content button {
            padding: 12px 30px; font-size: 16px;
            background: linear-gradient(135deg, #4a90e2, #357abd); color: white;
            border: none; border-radius: 25px; cursor: pointer; transition: all 0.2s ease;
        }
        @media (max-width: 480px) {
            .game { width: 95vw; padding: 20px 15px; margin: 10px; }
            button.cell { height: 22vw; font-size: 18vw; min-height: 70px; }
            h2 { font-size: 20px; }
        }
        @media (hover: none) and (pointer: coarse) { button.cell:hover { transform: none; } }
    </style>
</head>
<body>
    <div class="game">
        <div class="mode-buttons">
            <button class="mode-toggle active" onclick="setMode('human')">üë• Human vs Human</button>
            <button class="mode-toggle" onclick="setMode('ai')">ü§ñ vs AI </button>
        </div>
        <h2 id="status">your Turn (X)</h2>
        <div class="grid" id="grid"></div>
        <button class="reset" onclick="resetGame()">üîÑ New Game</button>
    </div>

    <div class="popup" id="popup">
        <div class="popup-content">
            <h3 id="popupText"></h3>
            <button onclick="closePopup()">OK</button>
        </div>
    </div>

    <!-- [Same JavaScript as before - no changes needed] -->
    <script>
        let currentPlayer = "X", board = Array(9).fill(""), gameActive = true, gameMode = 'human';
        const status = document.getElementById("status"), grid = document.getElementById("grid");
        const popup = document.getElementById("popup"), popupText = document.getElementById("popupText");

        for (let i = 0; i < 9; i++) {
            const btn = document.createElement("button");
            btn.className = "cell"; btn.setAttribute('aria-label', `Cell ${i + 1}`);
            btn.onclick = () => makeMove(btn, i); grid.appendChild(btn);
        }

        function setMode(mode) {
            gameMode = mode;
            document.querySelectorAll('.mode-toggle').forEach(btn => btn.classList.remove('active'));
            event.target.classList.add('active');
            resetGame();
        }

        function makeMove(button, index) {
            if (board[index] !== "" || !gameActive || (gameMode === 'ai' && currentPlayer === "O")) return;
            
            board[index] = currentPlayer; button.textContent = currentPlayer; button.disabled = true;
            
            const winner = checkWinner();
            if (winner) { showPopup(`üéâ ${gameMode === 'ai' ? (winner === 'X' ? 'You Win!' : 'AI Wins!') : `Player ${winner} Wins!`} üéâ`); gameActive = false; return; }
            if (board.every(cell => cell !== "")) { showPopup("ü§ù It's a Draw!"); gameActive = false; return; }

            if (gameMode === 'ai' && currentPlayer === "X") { setTimeout(aiMove, 500); return; }
            
            currentPlayer = currentPlayer === "X" ? "O" : "X"; updateStatus();
        }

        function aiMove() {
            const bestMove = minimax(board, "O").index;
            board[bestMove] = "O"; document.querySelectorAll('.cell')[bestMove].textContent = "O";
            document.querySelectorAll('.cell')[bestMove].disabled = true;

            const winner = checkWinner();
            if (winner) { showPopup(`üéâ ${winner === 'X' ? 'You Win!' : 'AI Wins!'} üéâ`); gameActive = false; return; }
            if (board.every(cell => cell !== "")) { showPopup("ü§ù It's a Draw!"); gameActive = false; return; }

            currentPlayer = "X"; updateStatus();
        }

        function minimax(newBoard, player) {
            const availSpots = emptyIndexies(newBoard);
            if (checkWinnerFromBoard(newBoard) === "O") return {score: 10};
            if (checkWinnerFromBoard(newBoard) === "X") return {score: -10};
            if (availSpots.length === 0) return {score: 0};

            const moves = [];
            for (let i = 0; i < availSpots.length; i++) {
                const move = {}; move.index = availSpots[i]; newBoard[availSpots[i]] = player;
                move.score = player === "O" ? minimax(newBoard, "X").score : minimax(newBoard, "O").score;
                newBoard[availSpots[i]] = ""; moves.push(move);
            }

            let bestMove;
            if (player === "O") {
                let bestScore = -Infinity;
                for (let i = 0; i < moves.length; i++) if (moves[i].score > bestScore) { bestScore = moves[i].score; bestMove = i; }
            } else {
                let bestScore = Infinity;
                for (let i = 0; i < moves.length; i++) if (moves[i].score < bestScore) { bestScore = moves[i].score; bestMove = i; }
            }
            return moves[bestMove];
        }

        function emptyIndexies(board) { return board.reduce((a, e, i) => e === "" ? a.concat(i) : a, []); }
        function checkWinnerFromBoard(boardState) {
            const lines = [[0,1,2],[3,4,5],[6,7,8],[0,3,6],[1,4,7],[2,5,8],[0,4,8],[2,4,6]];
            for (let [a,b,c] of lines) if (boardState[a] && boardState[a] === boardState[b] && boardState[a] === boardState[c]) return boardState[a];
            return null;
        }
        function checkWinner() { return checkWinnerFromBoard(board); }

        function updateStatus() {
            status.textContent = gameMode === 'ai' ? 
                (currentPlayer === "X" ? "Your Turn (X)" : "AI Thinking...") :
                `Turn: ${currentPlayer} (Player ${currentPlayer === 'X' ? 1 : 2})`;
            status.style.color = currentPlayer === "X" ? "#e74c3c" : "#3498db";
        }

        function disableAll() { document.querySelectorAll(".cell").forEach(btn => btn.disabled = true); }
        function resetGame() {
            board = Array(9).fill(""); currentPlayer = "X"; gameActive = true;
            status.textContent = gameMode === 'ai' ? "Your Turn (X)" : "your Turn (X)";
            status.style.color = "#333";
            document.querySelectorAll(".cell").forEach(btn => { btn.textContent = ""; btn.disabled = false; });
            closePopup(); updateStatus();
        }
        function showPopup(msg) { popupText.textContent = msg; popup.style.display = "flex"; disableAll(); }
        function closePopup() { popup.style.display = "none"; }

        document.addEventListener('touchstart', e => { if (e.touches.length > 1) e.preventDefault(); });
        let lastTouchEnd = 0;
        document.addEventListener('touchend', e => {
            const now = (new Date()).getTime();
            if (now - lastTouchEnd <= 300) e.preventDefault();
            lastTouchEnd = now;
        }, false);
    </script>
</body>
</html>
